{"version":3,"sources":["../../js/main.js"],"names":["App","loadData","then","setItemsToLS","convertItems","response","appendProducts","bindEvents","url","Promise","resolve","reject","xhr","XMLHttpRequest","responseType","open","onload","status","onerror","send","items","map","item","index","id","products","reduce","data","createProductTemplate","document","querySelector","innerHTML","loadProducts","key","JSON","parse","localStorage","getItem","setItem","stringify","picture","name","color","size","price","selector","element","addEventListener","target","event","tagName","closest","getAttribute","getItemByID","getItemsFromLS","addItemToCart","count","cart","findItem","find","push","init"],"mappings":";;;;;;IACMA,G;;;;;;;yBAEC;AAAA;;AACJ,QAAKC,QAAL,CAAc,YAAd,EAA4BC,IAA5B,CAAiC,oBAAY;AAC5C,UAAKC,YAAL,CAAkB,WAAlB,EAA+B,MAAKC,YAAL,CAAkBC,QAAlB,CAA/B;AACA,UAAKC,cAAL,CAAoBD,QAApB;AACA,IAHD;AAID,QAAKE,UAAL,CAAgB,sBAAhB;AACA;;AAED;;;;2BACSC,G,EAAI;AACZ,UAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAASC,MAAT,EAAoB;AACtC,QAAMC,MAAM,IAAIC,cAAJ,EAAZ;AACAD,QAAIE,YAAJ,GAAmB,MAAnB;AACAF,QAAIG,IAAJ,CAAS,KAAT,EAAgBP,GAAhB,EAAqB,IAArB;AACAI,QAAII,MAAJ,GAAa,YAAM;AAClBJ,SAAIK,MAAJ,KAAe,GAAf,GAAqBP,QAAQE,IAAIP,QAAZ,CAArB,GAA6CM,OAAOC,GAAP,CAA7C;AACA,KAFD;AAGAA,QAAIM,OAAJ,GAAcP,MAAd;AACAC,QAAIO,IAAJ;AACA,IATM,CAAP;AAUA;;;+BAEYC,K,EAAM;AAClB,UAAOA,MAAMC,GAAN,CAAU,UAACC,IAAD,EAAOC,KAAP,EAAiB;AACjCD,SAAKE,EAAL,GAAUD,KAAV;AACA,WAAOD,IAAP;AACA,IAHM,CAAP;AAIA;;AAED;;;;+BACaG,Q,EAAU;AAAA;;AACtB,UAAOA,SAASC,MAAT,CAAgB,UAACC,IAAD,EAAOL,IAAP,EAAaC,KAAb,EAAuB;AAC5CI,YAAQ,OAAKC,qBAAL,CAA2BN,IAA3B,EAAiCC,KAAjC,CAAR;AACA,WAAOI,IAAP;AACD,IAHM,EAGJ,EAHI,CAAP;AAIA;;AAED;;;;iCACeA,I,EAAK;AACnBE,YAASC,aAAT,CAAuB,sBAAvB,EAA+CC,SAA/C,GAA2D,KAAKC,YAAL,CAAkBL,IAAlB,CAA3D;AACA;;;iCAEcM,G,EAAI;AAClB,UAAOC,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqBJ,GAArB,CAAX,CAAP;AACA;;;+BAEYA,G,EAAKb,K,EAAM;AACvBgB,gBAAaE,OAAb,CAAqBL,GAArB,EAA0BC,KAAKK,SAAL,CAAenB,KAAf,CAA1B;AACA;;AAED;;;;8BACYI,E,EAAIJ,K,EAAO;AACtB,UAAOA,MAAMI,EAAN,CAAP;AACA;;AAED;;;;wCACsBF,I,EAAM;AAC3B,yDAAoDA,KAAKE,EAAzD,6DAC6CF,KAAKkB,OADlD,+IAGoClB,KAAKmB,IAHzC,wDAIqCnB,KAAKoB,KAJ1C,iFAMkBpB,KAAKqB,IANvB,6MAUuCrB,KAAKsB,KAV5C;AAeA;;AAED;;;;6BACWC,Q,EAAS;AAAA;;AACnB,OAAMC,UAAUjB,SAASC,aAAT,CAAuBe,QAAvB,CAAhB;AACAC,WAAQC,gBAAR,CAAyB,OAAzB,EAAkC,iBAAS;AAC1C,QAAMC,SAASC,MAAMD,MAArB;AACA,QAAIA,OAAOE,OAAP,KAAmB,QAAvB,EAAiC;AAChC,SAAM1B,KAAK,CAACwB,OAAOG,OAAP,CAAe,iBAAf,EAAkCC,YAAlC,CAA+C,cAA/C,CAAZ;AACA,SAAM9B,OAAO,OAAK+B,WAAL,CAAiB7B,EAAjB,EAAqB,OAAK8B,cAAL,CAAoB,WAApB,CAArB,CAAb;AACA,YAAKC,aAAL,CAAmBjC,IAAnB;AACA;AACD,WAAO,KAAP;AACA,IARD;AASA;;AAED;;;;gCACcA,I,EAAM;AACnBA,QAAKkC,KAAL,GAAa,CAAb;AACA,OAAIC,OAAO,KAAKH,cAAL,CAAoB,OAApB,CAAX;AACA,OAAIG,IAAJ,EAAU;AACT,QAAMC,WAAWD,KAAKE,IAAL,CAAU;AAAA,YAAQhC,KAAKH,EAAL,KAAYF,KAAKE,EAAzB;AAAA,KAAV,CAAjB;AACAkC,eAAWA,SAASF,KAAT,EAAX,GAA8BC,KAAKG,IAAL,CAAUtC,IAAV,CAA9B;AACA,IAHD,MAGO;AACNmC,WAAO,CAACnC,IAAD,CAAP;AACA;AACD,QAAKnB,YAAL,CAAkB,OAAlB,EAA2BsD,IAA3B;AACA;;;;;;AAGF5B,SAASkB,gBAAT,CAA0B,kBAA1B,EAA8C,YAAM;AAClD,KAAI/C,GAAJ,EAAD,CAAU6D,IAAV;AACA,CAFD","file":"main-babel.js","sourcesContent":["\nclass App{\n\n\tinit(){\n\t\t\tthis.loadData('items.json').then(response => {\n\t\t\t\tthis.setItemsToLS('_products', this.convertItems(response));\n\t\t\t\tthis.appendProducts(response);\n\t\t\t});\n\t\tthis.bindEvents('.products__item-list');\n\t}\n\n\t// Отсылка XMLHttpRequest\n\tloadData(url){\n\t\treturn new Promise((resolve,reject) => {\n\t\t\tconst xhr = new XMLHttpRequest;\n\t\t\txhr.responseType = 'json';\n\t\t\txhr.open('GET', url, true);\n\t\t\txhr.onload = () => {\n\t\t\t\txhr.status === 200 ? resolve(xhr.response) : reject(xhr);\n\t\t\t};\n\t\t\txhr.onerror = reject;\n\t\t\txhr.send();\n\t\t});\n\t}\n\n\tconvertItems(items){\n\t\treturn items.map((item, index) => {\n\t\t\titem.id = index;\n\t\t\treturn item;\n\t\t});\n\t}\n\n\t// Преобразование массива из JSON в HTML код\n\tloadProducts(products) {\n\t\treturn products.reduce((data, item, index) => {\n\t\t\t\tdata += this.createProductTemplate(item, index);\n\t\t\t\treturn data;\n\t\t}, '');\n\t}\n\n\t// Вставка готовой разметки в HTML\n\tappendProducts(data){\n\t\tdocument.querySelector('.products__item-list').innerHTML = this.loadProducts(data);\n\t}\n\n\tgetItemsFromLS(key){\n\t\treturn JSON.parse(localStorage.getItem(key));\n\t}\n\n\tsetItemsToLS(key, items){\n\t\tlocalStorage.setItem(key, JSON.stringify(items));\n\t}\n\t\n\t// Возвращает item по его атрибуту data-item-id\n\tgetItemByID(id, items) {\n\t\treturn items[id];\n\t}\n\n\t// Создание HTML кода 1 продукта\n\tcreateProductTemplate(item) {\n\t\treturn `<div class=\"products__item\" data-item-id=\"${item.id}\">\n\t\t\t\t<img class=\"products__item-picture\" src=\"${item.picture}\" alt=\"product\" width=\"360\" height=\"240\">\n\t\t\t\t<div class=\"products__item-content-wrap\">\n\t\t\t\t\t<p class=\"products__item-name\">${item.name}</p>\n\t\t\t\t\t<p class=\"products__item-color\">${item.color}</p>\n\t\t\t\t\t<p class=\"products__item-size\">\n\t\t\t\t\t\t<span>Size: ${item.size}</span>\n\t\t\t\t\t\t<a href=\"#\" class=\"products__item-size-change\">[Change]</a>\n\t\t\t\t\t</p>\n\t\t\t\t\t<footer class=\"products__item-foooter\">\n\t\t\t\t\t\t<p class=\"products__item-price\">£${item.price}.00</p>\n\t\t\t\t\t\t<button class=\"btn btn--blue\">add to basket</button>\n\t\t\t\t\t</footer>\n\t\t\t\t</div>\n\t\t\t</div>`\n\t}\n\t\n\t// Добавление item в корзину по нажатию кнопки add to basket\n\tbindEvents(selector){\n\t\tconst element = document.querySelector(selector);\n\t\telement.addEventListener('click', event => {\n\t\t\tconst target = event.target;\n\t\t\tif (target.tagName === \"BUTTON\") {\n\t\t\t\tconst id = +target.closest(\".products__item\").getAttribute('data-item-id');\n\t\t\t\tconst item = this.getItemByID(id, this.getItemsFromLS('_products'));\n\t\t\t\tthis.addItemToCart(item);\n\t\t\t}\n\t\t\treturn false;\n\t\t})\n\t}\n\t\n\t// Создание или обновление корзины в localStorage\n\taddItemToCart(item) {\n\t\titem.count = 1;\n\t\tlet cart = this.getItemsFromLS('_cart');\n\t\tif (cart) {\n\t\t\tconst findItem = cart.find(data => data.id === item.id);\n\t\t\tfindItem ? findItem.count++ : cart.push(item);\n\t\t} else {\n\t\t\tcart = [item];\n\t\t}\n\t\tthis.setItemsToLS('_cart', cart);\n\t}\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\t(new App).init();\n});\n\n"]}